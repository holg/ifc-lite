<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IFC-Lite Viewer</title>
    <link data-trunk rel="css" href="static/styles.css">
</head>
<body>
    <script type="module">
        // Geometry bridge - stores data in memory instead of localStorage
        // This avoids the 5MB localStorage limit
        window.ifcGeometryData = null;
        window.ifcEntityData = null;
        window.ifcDataTimestamp = '';

        window.setIfcGeometry = function(json) {
            window.ifcGeometryData = json;
            window.ifcDataTimestamp = Date.now().toString();
            console.log('[JS Bridge] Geometry set, size:', json.length, 'bytes');
        };

        window.getIfcGeometry = function() {
            return window.ifcGeometryData;
        };

        window.setIfcEntities = function(json) {
            window.ifcEntityData = json;
        };

        window.getIfcEntities = function() {
            return window.ifcEntityData;
        };

        window.getIfcTimestamp = function() {
            return window.ifcDataTimestamp;
        };
    </script>
    <!-- Bevy loader with hashed paths - generated by build script -->
    <script src="bevy-loader.js"></script>
    <link data-trunk rel="rust" href="Cargo.toml" data-wasm-opt="0" />
</body>
</html>
