<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IFC-Lite Viewer</title>
    <link data-trunk rel="css" href="static/styles.css">
</head>
<body>
    <script type="module">
        // Geometry bridge - stores data in memory instead of localStorage
        // Uses binary format for geometry data (much smaller and faster)
        window.ifcGeometryBinary = null;  // Uint8Array
        window.ifcEntityData = null;
        window.ifcDataTimestamp = '';

        // Binary geometry setter (from Yew)
        window.setIfcGeometryBinary = function(uint8Array) {
            window.ifcGeometryBinary = uint8Array;
            window.ifcDataTimestamp = Date.now().toString();
            console.log('[JS Bridge] Geometry binary set, size:', uint8Array.length, 'bytes');
        };

        // Binary geometry getter (for Bevy)
        window.getIfcGeometryBinary = function() {
            return window.ifcGeometryBinary;
        };

        window.setIfcEntities = function(json) {
            window.ifcEntityData = json;
        };

        window.getIfcEntities = function() {
            return window.ifcEntityData;
        };

        window.getIfcTimestamp = function() {
            return window.ifcDataTimestamp;
        };
    </script>
    <!-- Bevy loader with hashed paths - generated by build script -->
    <script src="bevy-loader.js"></script>
    <link data-trunk rel="rust" href="Cargo.toml" data-wasm-opt="0" />
</body>
</html>
